(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d3d885f"],{"0cb2":function(e,t,n){var c=n("e330"),r=n("7b0b"),a=Math.floor,l=c("".charAt),o=c("".replace),i=c("".slice),d=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,c,u,b){var O=n+e.length,g=c.length,h=s;return void 0!==u&&(u=r(u),h=d),o(b,h,(function(r,o){var d;switch(l(o,0)){case"$":return"$";case"&":return e;case"`":return i(t,0,n);case"'":return i(t,O);case"<":d=u[i(o,1,-1)];break;default:var s=+o;if(0===s)return r;if(s>g){var b=a(s/10);return 0===b?r:b<=g?void 0===c[b-1]?l(o,1):c[b-1]+l(o,1):r}d=c[s-1]}return void 0===d?"":d}))}},1148:function(e,t,n){"use strict";var c=n("da84"),r=n("5926"),a=n("577e"),l=n("1d80"),o=c.RangeError;e.exports=function(e){var t=a(l(this)),n="",c=r(e);if(c<0||c==1/0)throw o("Wrong number of repetitions");for(;c>0;(c>>>=1)&&(t+=t))1&c&&(n+=t);return n}},"408a":function(e,t,n){var c=n("e330");e.exports=c(1..valueOf)},5319:function(e,t,n){"use strict";var c=n("2ba4"),r=n("c65b"),a=n("e330"),l=n("d784"),o=n("d039"),i=n("825a"),d=n("1626"),s=n("5926"),u=n("50c4"),b=n("577e"),O=n("1d80"),g=n("8aa5"),h=n("dc4a"),f=n("0cb2"),j=n("14c3"),p=n("b622"),m=p("replace"),v=Math.max,y=Math.min,x=a([].concat),k=a([].push),w=a("".indexOf),M=a("".slice),$=function(e){return void 0===e?e:String(e)},D=function(){return"$0"==="a".replace(/./,"$0")}(),H=function(){return!!/./[m]&&""===/./[m]("a","$0")}(),C=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));l("replace",(function(e,t,n){var a=H?"$":"$0";return[function(e,n){var c=O(this),a=void 0==e?void 0:h(e,m);return a?r(a,e,c,n):r(t,b(c),e,n)},function(e,r){var l=i(this),o=b(e);if("string"==typeof r&&-1===w(r,a)&&-1===w(r,"$<")){var O=n(t,l,o,r);if(O.done)return O.value}var h=d(r);h||(r=b(r));var p=l.global;if(p){var m=l.unicode;l.lastIndex=0}var D=[];while(1){var H=j(l,o);if(null===H)break;if(k(D,H),!p)break;var C=b(H[0]);""===C&&(l.lastIndex=g(o,u(l.lastIndex),m))}for(var _="",N=0,S=0;S<D.length;S++){H=D[S];for(var I=b(H[0]),E=v(y(s(H.index),o.length),0),P=[],F=1;F<H.length;F++)k(P,$(H[F]));var L=H.groups;if(h){var T=x([I],P,E,o);void 0!==L&&k(T,L);var A=b(c(r,void 0,T))}else A=f(I,o,E,P,L,r);E>=N&&(_+=M(o,N,E)+A,N=E+I.length)}return _+M(o,N)}]}),!C||!D||H)},6053:function(e,t,n){"use strict";n.r(t);var c=n("7a23"),r={class:"container"},a=Object(c["g"])("h2",{class:"fs-3 text-center py-3"},"後台訂單管理列表",-1),l={class:"table mt-4"},o=Object(c["g"])("thead",null,[Object(c["g"])("tr",null,[Object(c["g"])("th",null,"購買時間"),Object(c["g"])("th",null,"Email"),Object(c["g"])("th",null,"購買品項"),Object(c["g"])("th",null,"應付金額"),Object(c["g"])("th",null,"付款狀態"),Object(c["g"])("th",null,"編輯")])],-1),i={key:0},d={class:"list-unstyled"},s={class:"text-right"},u={class:"form-check form-switch"},b=["checked","onChange"],O={class:"form-check-label",for:"flexSwitchCheckChecked"},g={class:"btn-group"},h=["onClick"],f=["onClick"],j={class:"d-flex justify-content-between align-items-center"};function p(e,t,n,p,m,v){var y=Object(c["E"])("Pagination"),x=Object(c["E"])("DeleteModal"),k=Object(c["E"])("OrderModal");return Object(c["y"])(),Object(c["f"])(c["a"],null,[Object(c["g"])("div",r,[a,Object(c["g"])("table",l,[o,Object(c["g"])("tbody",null,[(Object(c["y"])(!0),Object(c["f"])(c["a"],null,Object(c["D"])(m.orders,(function(e,t){return Object(c["y"])(),Object(c["f"])(c["a"],{key:t},[m.orders.length?(Object(c["y"])(),Object(c["f"])("tr",i,[Object(c["g"])("td",null,Object(c["H"])(v.changeDate(e.create_at)),1),Object(c["g"])("td",null,[Object(c["g"])("span",null,Object(c["H"])(e.user.email),1)]),Object(c["g"])("td",null,[Object(c["g"])("ul",d,[(Object(c["y"])(!0),Object(c["f"])(c["a"],null,Object(c["D"])(e.products,(function(e,t){return Object(c["y"])(),Object(c["f"])("li",{key:t},Object(c["H"])(e.product.title)+" 數量："+Object(c["H"])(e.qty)+" "+Object(c["H"])(e.product.unit),1)})),128))])]),Object(c["g"])("td",s,"NT$"+Object(c["H"])(v.changeNum(e.total)),1),Object(c["g"])("td",null,[Object(c["g"])("div",u,[Object(c["g"])("input",{class:"form-check-input rounded",type:"checkbox",id:"flexSwitchCheckChecked",checked:1==e.is_paid,onChange:function(t){return e.is_paid=!e.is_paid}},null,40,b),Object(c["g"])("label",O,Object(c["H"])(e.is_paid?"已付款":"未付款"),1)])]),Object(c["g"])("td",null,[Object(c["g"])("div",g,[Object(c["g"])("button",{class:"btn btn-outline-danger btn-sm me-1",type:"button",onClick:function(t){return v.openDelModal(e)}}," 刪除訂單 ",8,h),Object(c["g"])("button",{class:"btn btn-primary btn-sm",type:"button",onClick:function(t){return v.openModal(e)}}," 檢視訂單 ",8,f)])])])):Object(c["e"])("",!0)],64)})),128))])]),Object(c["g"])("div",j,[Object(c["j"])(y,{pages:m.pagination,onGetPage:v.getOrders},null,8,["pages","onGetPage"]),Object(c["g"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:t[0]||(t[0]=function(e){return v.deleteAllOrders()})},"刪除全部訂單")])]),Object(c["j"])(x,{item:m.tempOrder,ref:"delModal",onDelItem:v.deleteOrder},null,8,["item","onDelItem"]),Object(c["j"])(k,{order:m.tempOrder,ref:"orderModal",onChangePaid:v.changePaid},null,8,["order","onChangePaid"])],64)}var m=n("5530"),v=(n("99af"),n("ac1f"),n("5319"),n("b680"),n("ca8d")),y=n("6ff1"),x=(n("b0c0"),{class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"}),k={class:"modal-dialog modal-xl",role:"document"},w={class:"modal-content border-0"},M=Object(c["g"])("div",{class:"modal-header bg-dark text-white"},[Object(c["g"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(c["g"])("span",null,"訂單明細")]),Object(c["g"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),$={class:"modal-body"},D={class:"row"},H={class:"col-md-4"},C=Object(c["g"])("h3",null,"用戶資料",-1),_={class:"table"},N={key:0},S=Object(c["g"])("th",{style:{width:"100px"}},"姓名",-1),I=Object(c["g"])("th",null,"Email",-1),E=Object(c["g"])("th",null,"電話",-1),P=Object(c["g"])("th",null,"地址",-1),F={class:"col-md-8"},L=Object(c["g"])("h3",null,"訂單細節",-1),T={class:"table"},A=Object(c["g"])("th",{style:{width:"100px"}},"訂單編號",-1),R=Object(c["g"])("th",null,"下單時間",-1),q=Object(c["g"])("th",null,"付款狀態",-1),G={key:0,class:"text-success"},J={key:1,class:"text-muted"},K=Object(c["g"])("th",null,"總金額",-1),U={class:"table"},V=Object(c["g"])("thead",null,[Object(c["g"])("tr",null,[Object(c["g"])("h3",null,"選購商品")])],-1),W={class:"text-end"},X={class:"d-flex justify-content-end"},z={class:"form-check"},B={class:"form-check-label",for:"flexCheckDefault"},Q={key:0},Y={key:1},Z={class:"modal-footer"},ee=Object(c["g"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function te(e,t,n,r,a,l){return Object(c["y"])(),Object(c["f"])("div",x,[Object(c["g"])("div",k,[Object(c["g"])("div",w,[M,Object(c["g"])("div",$,[Object(c["g"])("div",D,[Object(c["g"])("div",H,[C,Object(c["g"])("table",_,[a.adminOrder.user?(Object(c["y"])(),Object(c["f"])("tbody",N,[Object(c["g"])("tr",null,[S,Object(c["g"])("td",null,Object(c["H"])(a.adminOrder.user.name),1)]),Object(c["g"])("tr",null,[I,Object(c["g"])("td",null,Object(c["H"])(a.adminOrder.user.email),1)]),Object(c["g"])("tr",null,[E,Object(c["g"])("td",null,Object(c["H"])(a.adminOrder.user.tel),1)]),Object(c["g"])("tr",null,[P,Object(c["g"])("td",null,Object(c["H"])(a.adminOrder.user.address),1)])])):Object(c["e"])("",!0)])]),Object(c["g"])("div",F,[L,Object(c["g"])("table",T,[Object(c["g"])("tbody",null,[Object(c["g"])("tr",null,[A,Object(c["g"])("td",null,Object(c["H"])(a.adminOrder.id),1)]),Object(c["g"])("tr",null,[R,Object(c["g"])("td",null,Object(c["H"])(l.changeDate(a.adminOrder.create_at)),1)]),Object(c["g"])("tr",null,[q,Object(c["g"])("td",null,[a.adminOrder.is_paid?(Object(c["y"])(),Object(c["f"])("strong",G,"已付款")):(Object(c["y"])(),Object(c["f"])("span",J,"尚未付款"))])]),Object(c["g"])("tr",null,[K,Object(c["g"])("td",null," NT$"+Object(c["H"])(l.changeNum(a.adminOrder.total)),1)])])]),Object(c["g"])("table",U,[V,Object(c["g"])("tbody",null,[(Object(c["y"])(!0),Object(c["f"])(c["a"],null,Object(c["D"])(a.adminOrder.products,(function(e){return Object(c["y"])(),Object(c["f"])("tr",{key:e.id},[Object(c["g"])("th",null,Object(c["H"])(e.product.title),1),Object(c["g"])("td",null,Object(c["H"])(e.qty)+" / "+Object(c["H"])(e.product.unit),1),Object(c["g"])("td",W," NT$"+Object(c["H"])(l.changeNum(e.final_total)),1)])})),128))])]),Object(c["g"])("div",X,[Object(c["g"])("div",z,[Object(c["R"])(Object(c["g"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.adminOrder.is_paid=e})},null,512),[[c["K"],a.adminOrder.is_paid]]),Object(c["g"])("label",B,[a.adminOrder.is_paid?(Object(c["y"])(),Object(c["f"])("span",Q,"已付款")):(Object(c["y"])(),Object(c["f"])("span",Y,"未付款"))])])])])])]),Object(c["g"])("div",Z,[ee,Object(c["g"])("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=function(t){return e.$emit("change-paid",a.adminOrder)})}," 修改付款狀態 ")])])])],512)}var ne=n("7c2b"),ce=n.n(ne),re={data:function(){return{adminOrder:{}}},props:["order"],emits:["change-paid"],watch:{order:function(){this.adminOrder=this.order,console.log(this.adminOrder)}},methods:{showModal:function(){this.orderModal.show()},hideModal:function(){this.orderModal.hide()},changeDate:function(e){var t=new Date(1e3*e);return t.toLocaleDateString()},changeNum:function(e){var t=parseInt(e,10);return"".concat(t.toFixed(0).replace(/./g,(function(e,t,n){return t&&"."!==e&&(n.length-t)%3===0?", ".concat(e).replace(/\s/g,""):e})))}},mounted:function(){this.orderModal=new ce.a(this.$refs.modal)}},ae=n("6b0d"),le=n.n(ae);const oe=le()(re,[["render",te]]);var ie=oe,de={components:{Pagination:v["a"],DeleteModal:y["a"],OrderModal:ie},data:function(){return{orders:{},pagination:{},tempOrder:{}}},methods:{getOrders:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("ptsai0412","/admin/orders?page=").concat(t);this.$http.get(n).then((function(t){e.orders=t.data.orders,e.pagination=t.data.pagination})).catch((function(e){console.log(e.messages)}))},openModal:function(e){this.tempOrder=Object(m["a"])({},e),this.$refs.orderModal.showModal()},openDelModal:function(e){this.tempOrder=Object(m["a"])({},e),this.$refs.delModal.showModal()},deleteOrder:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("ptsai0412","/admin/order/").concat(this.tempOrder.id);this.$http.delete(t).then((function(t){e.getOrders(),e.$refs.delModal.hideModal(),e.$swal("已刪除訂單")})).catch((function(e){console.log(e)}))},changePaid:function(e){var t=this,n="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("ptsai0412","/admin/order/").concat(this.tempOrder.id),c={is_paid:e.is_paid};this.$http.put(n,{data:c}).then((function(e){t.$refs.orderModal.hideModal(),t.getOrders(),t.$swal("付款狀態已更新")})).catch((function(e){console.log(e)}))},deleteAllOrders:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("ptsai0412","/admin/orders/all");this.$http.delete(t).then((function(t){e.getOrders(),e.$swal("已刪除全部訂單")})).catch((function(e){console.log(e)}))},changeDate:function(e){var t=new Date(1e3*e);return t.toLocaleDateString()},changeNum:function(e){var t=parseInt(e,10);return"".concat(t.toFixed(0).replace(/./g,(function(e,t,n){return t&&"."!==e&&(n.length-t)%3===0?", ".concat(e).replace(/\s/g,""):e})))}},mounted:function(){this.getOrders()}};const se=le()(de,[["render",p]]);t["default"]=se},b0c0:function(e,t,n){var c=n("83ab"),r=n("5e77").EXISTS,a=n("e330"),l=n("9bf2").f,o=Function.prototype,i=a(o.toString),d=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,s=a(d.exec),u="name";c&&!r&&l(o,u,{configurable:!0,get:function(){try{return s(d,i(this))[1]}catch(e){return""}}})},b680:function(e,t,n){"use strict";var c=n("23e7"),r=n("da84"),a=n("e330"),l=n("5926"),o=n("408a"),i=n("1148"),d=n("d039"),s=r.RangeError,u=r.String,b=Math.floor,O=a(i),g=a("".slice),h=a(1..toFixed),f=function(e,t,n){return 0===t?n:t%2===1?f(e,t-1,n*e):f(e*e,t/2,n)},j=function(e){var t=0,n=e;while(n>=4096)t+=12,n/=4096;while(n>=2)t+=1,n/=2;return t},p=function(e,t,n){var c=-1,r=n;while(++c<6)r+=t*e[c],e[c]=r%1e7,r=b(r/1e7)},m=function(e,t){var n=6,c=0;while(--n>=0)c+=e[n],e[n]=b(c/t),c=c%t*1e7},v=function(e){var t=6,n="";while(--t>=0)if(""!==n||0===t||0!==e[t]){var c=u(e[t]);n=""===n?c:n+O("0",7-c.length)+c}return n},y=d((function(){return"0.000"!==h(8e-5,3)||"1"!==h(.9,0)||"1.25"!==h(1.255,2)||"1000000000000000128"!==h(0xde0b6b3a7640080,0)}))||!d((function(){h({})}));c({target:"Number",proto:!0,forced:y},{toFixed:function(e){var t,n,c,r,a=o(this),i=l(e),d=[0,0,0,0,0,0],b="",h="0";if(i<0||i>20)throw s("Incorrect fraction digits");if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return u(a);if(a<0&&(b="-",a=-a),a>1e-21)if(t=j(a*f(2,69,1))-69,n=t<0?a*f(2,-t,1):a/f(2,t,1),n*=4503599627370496,t=52-t,t>0){p(d,0,n),c=i;while(c>=7)p(d,1e7,0),c-=7;p(d,f(10,c,1),0),c=t-1;while(c>=23)m(d,1<<23),c-=23;m(d,1<<c),p(d,1,1),m(d,2),h=v(d)}else p(d,0,n),p(d,1<<-t,0),h=v(d)+O("0",i);return i>0?(r=h.length,h=b+(r<=i?"0."+O("0",i-r)+h:g(h,0,r-i)+"."+g(h,r-i))):h=b+h,h}})}}]);
//# sourceMappingURL=chunk-0d3d885f.986181a6.js.map