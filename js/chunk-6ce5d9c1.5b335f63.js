(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ce5d9c1"],{"25d3":function(t,e,c){"use strict";c.r(e);var o=c("7a23"),l=Object(o["g"])("h2",{class:"fs-3 text-center py-3"},"後台產品管理列表",-1),n={class:"container"},r={class:"text-end mt-4"},a={class:"table mt-4"},i=Object(o["g"])("thead",null,[Object(o["g"])("tr",null,[Object(o["g"])("th",{width:"150"},"產品"),Object(o["g"])("th",{width:"100"},"分類"),Object(o["g"])("th",null,"產品名稱"),Object(o["g"])("th",{width:"120"},"原價"),Object(o["g"])("th",{width:"120"},"售價"),Object(o["g"])("th",{width:"120"},"是否啟用"),Object(o["g"])("th",{width:"120"},"編輯")])],-1),d={style:{width:"150px"}},s={class:"form-check form-switch"},u=["checked","onChange"],b={class:"form-check-label",for:"flexSwitchCheckChecked"},p={class:"btn-group"},m=["onClick"],g=["onClick"];function f(t,e,c,f,h,O){var j=Object(o["E"])("Pagination"),v=Object(o["E"])("product-modal"),y=Object(o["E"])("DeleteModal");return Object(o["y"])(),Object(o["f"])(o["a"],null,[l,Object(o["g"])("div",n,[Object(o["g"])("div",r,[Object(o["g"])("button",{class:"btn btn-primary",type:"button",onClick:e[0]||(e[0]=function(t){return O.openModal("new")})}," 建立新產品 ")]),Object(o["g"])("table",a,[i,Object(o["g"])("tbody",null,[(Object(o["y"])(!0),Object(o["f"])(o["a"],null,Object(o["D"])(h.products,(function(t){return Object(o["y"])(),Object(o["f"])("tr",{key:t.id},[Object(o["g"])("td",d,[Object(o["g"])("div",{style:Object(o["s"])([{height:"150px","background-size":"cover","background-position":"center"},{backgroundImage:"url(".concat(t.imageUrl,")")}])},null,4)]),Object(o["g"])("td",null,Object(o["H"])(t.category),1),Object(o["g"])("td",null,Object(o["H"])(t.title),1),Object(o["g"])("td",null,Object(o["H"])(t.origin_price),1),Object(o["g"])("td",null,Object(o["H"])(t.price),1),Object(o["g"])("td",null,[Object(o["g"])("div",s,[Object(o["g"])("input",{class:"form-check-input rounded",type:"checkbox",id:"flexSwitchCheckChecked",checked:1==t.is_enabled,onChange:function(e){return t.is_enabled=!t.is_enabled}},null,40,u),Object(o["g"])("label",b,Object(o["H"])(t.is_enabled?"啟用":"未啟用"),1)])]),Object(o["g"])("td",null,[Object(o["g"])("div",p,[Object(o["g"])("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:function(e){return O.openModal("edit",t)}}," 編輯 ",8,m),Object(o["g"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(e){return O.openModal("delete",t)}}," 刪除 ",8,g)])])])})),128))])]),Object(o["j"])(j,{pages:h.pagination,onGetPage:O.getProductsList},null,8,["pages","onGetPage"])]),Object(o["j"])(v,{item:h.tempProduct,isNew:h.isNew,ref:"productModal",onGetProductsList:O.getProductsList,"current-page":h.pagination.current_page},null,8,["item","isNew","onGetProductsList","current-page"]),Object(o["j"])(y,{item:h.tempProduct,onDelItem:O.deleteProduct,ref:"delModal"},null,8,["item","onDelItem"])],64)}var h=c("5530"),O=(c("99af"),c("6ff1")),j=c("ca8d"),v=(c("a4d3"),c("e01a"),c("a434"),{class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"}),y={class:"modal-dialog modal-xl"},P={class:"modal-content border-0"},w={class:"modal-header bg-dark text-white"},M={id:"productModalLabel",class:"modal-title"},k=Object(o["g"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),U={class:"modal-body"},x={class:"row"},C={class:"col-sm-4"},N={class:"mb-3"},S=Object(o["g"])("label",{for:"imageUrl",class:"form-label"},"主圖網址",-1),$=["src","alt"],_={class:"mb-3"},D=Object(o["g"])("h3",null,"多圖設置",-1),V={key:0},L=["onUpdate:modelValue"],R=["src"],F=["onClick"],J={class:"col-sm-8"},A={class:"mb-3"},H=Object(o["g"])("label",{for:"title",class:"form-label"},"標題",-1),E={class:"row"},G={class:"mb-3 col-md-6"},I=Object(o["g"])("label",{for:"category",class:"form-label"},"分類",-1),q={class:"mb-3 col-md-6"},z=Object(o["g"])("label",{for:"price",class:"form-label"},"單位",-1),B={class:"row"},K={class:"mb-3 col-md-6"},T=Object(o["g"])("label",{for:"origin_price",class:"form-label"},"原價",-1),Q={class:"mb-3 col-md-6"},W=Object(o["g"])("label",{for:"price",class:"form-label"},"售價",-1),X=Object(o["g"])("hr",null,null,-1),Y={class:"mb-3"},Z=Object(o["g"])("label",{for:"description",class:"form-label"},"產品描述",-1),tt={class:"mb-3"},et=Object(o["g"])("label",{for:"content",class:"form-label"},"說明內容",-1),ct={class:"mb-3"},ot={class:"form-check"},lt=Object(o["g"])("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),nt={class:"modal-footer"},rt=Object(o["g"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function at(t,e,c,l,n,r){return Object(o["y"])(),Object(o["f"])("div",v,[Object(o["g"])("div",y,[Object(o["g"])("div",P,[Object(o["g"])("div",w,[Object(o["g"])("h5",M,[Object(o["g"])("span",null,Object(o["H"])(c.isNew?"新增":"編輯")+"產品",1)]),k]),Object(o["g"])("div",U,[Object(o["g"])("div",x,[Object(o["g"])("div",C,[Object(o["g"])("div",N,[S,Object(o["R"])(Object(o["g"])("input",{type:"text",class:"form-control",id:"imageUrl","onUpdate:modelValue":e[0]||(e[0]=function(t){return n.tempProduct.imageUrl=t}),placeholder:"請輸入圖片連結"},null,512),[[o["M"],n.tempProduct.imageUrl]]),Object(o["g"])("img",{class:"img-fluid",src:n.tempProduct.imageUrl,alt:n.tempProduct.description},null,8,$)]),Object(o["g"])("div",_,[D,Array.isArray(n.tempProduct.imagesUrl)?(Object(o["y"])(),Object(o["f"])("div",V,[(Object(o["y"])(!0),Object(o["f"])(o["a"],null,Object(o["D"])(n.tempProduct.imagesUrl,(function(t,e){return Object(o["y"])(),Object(o["f"])(o["a"],{key:e+"123"},[Object(o["R"])(Object(o["g"])("input",{type:"text",class:"form-control","onUpdate:modelValue":function(t){return n.tempProduct.imagesUrl[e]=t}},null,8,L),[[o["M"],n.tempProduct.imagesUrl[e]]]),Object(o["g"])("img",{src:n.tempProduct.imagesUrl[e],class:"img-fluid",alt:"產品圖片"},null,8,R),Object(o["g"])("button",{type:"button",class:"btn btn-danger btn-sm d-block w-100",onClick:function(t){return n.tempProduct.imagesUrl.splice(e,1)}},"刪除圖片",8,F)],64)})),128)),!n.tempProduct.imagesUrl.length||n.tempProduct.imagesUrl[n.tempProduct.imagesUrl.length-1]?(Object(o["y"])(),Object(o["f"])("button",{key:0,type:"button",class:"btn btn-primary mt-3",onClick:e[1]||(e[1]=function(t){return n.tempProduct.imagesUrl.push("")})},"新增圖片")):Object(o["e"])("",!0)])):Object(o["e"])("",!0)])]),Object(o["g"])("div",J,[Object(o["g"])("div",A,[H,Object(o["R"])(Object(o["g"])("input",{id:"title",type:"text",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=function(t){return n.tempProduct.title=t}),placeholder:"請輸入標題"},null,512),[[o["M"],n.tempProduct.title]])]),Object(o["g"])("div",E,[Object(o["g"])("div",G,[I,Object(o["R"])(Object(o["g"])("input",{id:"category",type:"text",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=function(t){return n.tempProduct.category=t}),placeholder:"請輸入分類"},null,512),[[o["M"],n.tempProduct.category]])]),Object(o["g"])("div",q,[z,Object(o["R"])(Object(o["g"])("input",{id:"unit",type:"text",class:"form-control",placeholder:"請輸入單位","onUpdate:modelValue":e[4]||(e[4]=function(t){return n.tempProduct.unit=t})},null,512),[[o["M"],n.tempProduct.unit]])])]),Object(o["g"])("div",B,[Object(o["g"])("div",K,[T,Object(o["R"])(Object(o["g"])("input",{id:"origin_price",type:"number",min:"0",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=function(t){return n.tempProduct.origin_price=t}),placeholder:"請輸入原價"},null,512),[[o["M"],n.tempProduct.origin_price,void 0,{number:!0}]])]),Object(o["g"])("div",Q,[W,Object(o["R"])(Object(o["g"])("input",{id:"price",type:"number",min:"0",class:"form-control","onUpdate:modelValue":e[6]||(e[6]=function(t){return n.tempProduct.price=t}),placeholder:"請輸入售價"},null,512),[[o["M"],n.tempProduct.price,void 0,{number:!0}]])])]),X,Object(o["g"])("div",Y,[Z,Object(o["R"])(Object(o["g"])("textarea",{id:"description",type:"text",class:"form-control","onUpdate:modelValue":e[7]||(e[7]=function(t){return n.tempProduct.description=t}),placeholder:"請輸入產品描述"},"\r\n                    ",512),[[o["M"],n.tempProduct.description]])]),Object(o["g"])("div",tt,[et,Object(o["R"])(Object(o["g"])("textarea",{id:"description",type:"text",class:"form-control","onUpdate:modelValue":e[8]||(e[8]=function(t){return n.tempProduct.content=t}),placeholder:"請輸入說明內容"},"\r\n                    ",512),[[o["M"],n.tempProduct.content]])]),Object(o["g"])("div",ct,[Object(o["g"])("div",ot,[Object(o["R"])(Object(o["g"])("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":e[9]||(e[9]=function(t){return n.tempProduct.is_enabled=t})},null,512),[[o["K"],n.tempProduct.is_enabled]]),lt])])])])]),Object(o["g"])("div",nt,[rt,Object(o["g"])("button",{type:"button",class:"btn btn-primary",onClick:e[10]||(e[10]=function(t){return r.updateProduct()})}," 確認 ")])])])],512)}c("e9c4");var it=c("7c2b"),dt=c.n(it),st={props:["item","isNew","currentPage"],data:function(){return{modal:{},product:{},tempProduct:{imagesUrl:[]},qty:1}},watch:{item:function(){this.tempProduct=JSON.parse(JSON.stringify(this.item))}},methods:{showModal:function(){this.productModal.show()},hideModal:function(){this.productModal.hide()},updateProduct:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("ptsai0412","/admin/product"),c="post";this.isNew||(console.log(this.tempProduct.id),e="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("ptsai0412","/admin/product/").concat(this.tempProduct.id),c="put",console.log("更改")),this.$http[c](e,{data:this.tempProduct}).then((function(e){alert(e.data.message),t.$emit("getProductsList"),t.hideModal(),console.log("顯示已建立商品")})).catch((function(t){console.dir(t),alert(t.data.message)}))}},mounted:function(){this.tempProduct=JSON.parse(JSON.stringify(this.item)),this.productModal=new dt.a(this.$refs.modal)}},ut=c("6b0d"),bt=c.n(ut);const pt=bt()(st,[["render",at]]);var mt=pt,gt={components:{Pagination:j["a"],ProductModal:mt,DeleteModal:O["a"]},data:function(){return{products:[],pagination:{},isNew:!1,tempProduct:{imagesUrl:[]}}},methods:{getProductsList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("ptsai0412","/admin/products/?page=").concat(e);this.$http.get(c).then((function(e){var c=e.data,o=c.products,l=c.pagination;t.products=o,t.pagination=l}))},openModal:function(t,e){"new"===t?(this.tempProduct={imagesUrl:[]},this.isNew=!0,this.$refs.productModal.showModal()):"edit"===t?(this.tempProduct=Object(h["a"])({},e),this.isNew=!1,this.$refs.productModal.showModal(),this.tempProduct.imagesUrl||(this.tempProduct.imagesUrl=[])):"delete"===t&&(this.tempProduct=Object(h["a"])({},e),this.$refs.delModal.showModal())},deleteProduct:function(){var t=this;this.$http.delete("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("ptsai0412","/admin/product/").concat(this.tempProduct.id)).then((function(e){t.getProductsList(),t.$refs.delModal.hideModal(),t.$swal("已刪除產品")})).catch((function(t){alert(t.message)}))}},mounted:function(){this.getProductsList()}};const ft=bt()(gt,[["render",f]]);e["default"]=ft},a434:function(t,e,c){"use strict";var o=c("23e7"),l=c("da84"),n=c("23cb"),r=c("5926"),a=c("07fa"),i=c("7b0b"),d=c("65f0"),s=c("8418"),u=c("1dde"),b=u("splice"),p=l.TypeError,m=Math.max,g=Math.min,f=9007199254740991,h="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!b},{splice:function(t,e){var c,o,l,u,b,O,j=i(this),v=a(j),y=n(t,v),P=arguments.length;if(0===P?c=o=0:1===P?(c=0,o=v-y):(c=P-2,o=g(m(r(e),0),v-y)),v+c-o>f)throw p(h);for(l=d(j,o),u=0;u<o;u++)b=y+u,b in j&&s(l,u,j[b]);if(l.length=o,c<o){for(u=y;u<v-o;u++)b=u+o,O=u+c,b in j?j[O]=j[b]:delete j[O];for(u=v;u>v-o+c;u--)delete j[u-1]}else if(c>o)for(u=v-o;u>y;u--)b=u+o-1,O=u+c-1,b in j?j[O]=j[b]:delete j[O];for(u=0;u<c;u++)j[u+y]=arguments[u+2];return j.length=v-o+c,l}})},e01a:function(t,e,c){"use strict";var o=c("23e7"),l=c("83ab"),n=c("da84"),r=c("e330"),a=c("1a2d"),i=c("1626"),d=c("3a9b"),s=c("577e"),u=c("9bf2").f,b=c("e893"),p=n.Symbol,m=p&&p.prototype;if(l&&i(p)&&(!("description"in m)||void 0!==p().description)){var g={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:s(arguments[0]),e=d(m,this)?new p(t):void 0===t?p():p(t);return""===t&&(g[e]=!0),e};b(f,p),f.prototype=m,m.constructor=f;var h="Symbol(test)"==String(p("test")),O=r(m.toString),j=r(m.valueOf),v=/^Symbol\((.*)\)[^)]+$/,y=r("".replace),P=r("".slice);u(m,"description",{configurable:!0,get:function(){var t=j(this),e=O(t);if(a(g,t))return"";var c=h?P(e,7,-1):y(e,v,"$1");return""===c?void 0:c}}),o({global:!0,forced:!0},{Symbol:f})}},e9c4:function(t,e,c){var o=c("23e7"),l=c("da84"),n=c("d066"),r=c("2ba4"),a=c("e330"),i=c("d039"),d=l.Array,s=n("JSON","stringify"),u=a(/./.exec),b=a("".charAt),p=a("".charCodeAt),m=a("".replace),g=a(1..toString),f=/[\uD800-\uDFFF]/g,h=/^[\uD800-\uDBFF]$/,O=/^[\uDC00-\uDFFF]$/,j=function(t,e,c){var o=b(c,e-1),l=b(c,e+1);return u(h,t)&&!u(O,l)||u(O,t)&&!u(h,o)?"\\u"+g(p(t,0),16):t},v=i((function(){return'"\\udf06\\ud834"'!==s("\udf06\ud834")||'"\\udead"'!==s("\udead")}));s&&o({target:"JSON",stat:!0,forced:v},{stringify:function(t,e,c){for(var o=0,l=arguments.length,n=d(l);o<l;o++)n[o]=arguments[o];var a=r(s,null,n);return"string"==typeof a?m(a,f,j):a}})}}]);
//# sourceMappingURL=chunk-6ce5d9c1.5b335f63.js.map