(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-525f4d47"],{"045a":function(t,e,c){},"0b42":function(t,e,c){var n=c("da84"),a=c("e8b5"),o=c("68ee"),r=c("861d"),s=c("b622"),i=s("species"),l=n.Array;t.exports=function(t){var e;return a(t)&&(e=t.constructor,o(e)&&(e===l||a(e.prototype))?e=void 0:r(e)&&(e=e[i],null===e&&(e=void 0))),void 0===e?l:e}},"1a9f":function(t,e,c){"use strict";c("045a")},"1dde":function(t,e,c){var n=c("d039"),a=c("b622"),o=c("2d00"),r=a("species");t.exports=function(t){return o>=51||!n((function(){var e=[],c=e.constructor={};return c[r]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"4dcd":function(t,e,c){"use strict";var n=function(t){return{all:t=t||new Map,on:function(e,c){var n=t.get(e);n?n.push(c):t.set(e,[c])},off:function(e,c){var n=t.get(e);n&&(c?n.splice(n.indexOf(c)>>>0,1):t.set(e,[]))},emit:function(e,c){var n=t.get(e);n&&n.slice().map((function(t){t(c)})),(n=t.get("*"))&&n.slice().map((function(t){t(e,c)}))}}},a=n();e["a"]=a},"65f0":function(t,e,c){var n=c("0b42");t.exports=function(t,e){return new(n(t))(0===e?0:e)}},8418:function(t,e,c){"use strict";var n=c("a04b"),a=c("9bf2"),o=c("5c6c");t.exports=function(t,e,c){var r=n(e);r in t?a.f(t,r,o(0,c)):t[r]=c}},"99af":function(t,e,c){"use strict";var n=c("23e7"),a=c("da84"),o=c("d039"),r=c("e8b5"),s=c("861d"),i=c("7b0b"),l=c("07fa"),u=c("8418"),b=c("65f0"),d=c("1dde"),f=c("b622"),p=c("2d00"),g=f("isConcatSpreadable"),h=9007199254740991,j="Maximum allowed index exceeded",x=a.TypeError,m=p>=51||!o((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),O=d("concat"),v=function(t){if(!s(t))return!1;var e=t[g];return void 0!==e?!!e:r(t)},y=!m||!O;n({target:"Array",proto:!0,forced:y},{concat:function(t){var e,c,n,a,o,r=i(this),s=b(r,0),d=0;for(e=-1,n=arguments.length;e<n;e++)if(o=-1===e?r:arguments[e],v(o)){if(a=l(o),d+a>h)throw x(j);for(c=0;c<a;c++,d++)c in o&&u(s,d,o[c])}else{if(d>=h)throw x(j);u(s,d++,o)}return s.length=d,s}})},"9bfa":function(t,e,c){"use strict";c.r(e);c("99af");var n=c("7a23"),a={class:"container py-5"},o=Object(n["h"])('<ul class="progressbar mb-5 text-secondary d-flex list-unstyled justify-content-around"><li class="bg-warning d-flex flex-column align-items-center"><i class="bi bi-cart-check fs-2"></i>確認購物車</li><li class="border border-success border-2 d-flex flex-column align-items-center"><i class="bi bi-card-list fs-2"></i>填寫訂單</li><li class="border border-success border-2 d-flex flex-column align-items-center"><i class="bi bi-cash-coin fs-2"></i>完成付款</li></ul>',1),r={class:"row"},s={class:"col-lg-8 col-12"},i=Object(n["g"])("h1",{class:"fs-3 fw-bold text-light text-center px-4 py-2 bg-success"},"購物車清單",-1),l={class:"d-sm-flex text-center text-md-start"},u={class:"ms-md-5 pt-3 text-secondary"},b={class:"fs-4 fw-bold"},d={clsss:"fs-5 fw-bold"},f={class:"d-flex flex-column pt-2 pt-sm-0 mx-auto mx-sm-0 text-center",style:{"max-width":"10rem"}},p={class:"form-group mb-2"},g=Object(n["g"])("p",{class:"mb-0 text-secondary"},"購買數量",-1),h=["onUpdate:modelValue","onChange"],j=["value","selected"],x=["onClick"],m=Object(n["g"])("i",{class:"bi bi-trash-fill"},null,-1),O=Object(n["i"])(" 刪除"),v=[m,O],y={key:1,class:"d-flex flex-column align-items-center justify-content-center mb-3",style:{"background-Image":"url(https://images.unsplash.com/photo-1486306885345-1256d25cd259?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=869&q=80)",height:"500px","background-position":"bottom center"}},w=Object(n["g"])("p",{class:"fw-bold fs-3 text-light text-center"},"購物車內沒有商品",-1),k=Object(n["i"])("前往購物"),C={class:"col-lg-4 col-12 pt-3 pt-md-0"},$=Object(n["g"])("h2",{class:"fs-3 fw-bold text-light px-4 py-2 bg-success text-center"},"合計",-1),A={class:"fs-4 mb-0"},D=Object(n["g"])("p",{class:"fs-4 text-dark"},"運費: 免運費",-1),H={class:"fs-4 fw-bold text-secondary"},q=Object(n["g"])("hr",null,null,-1),I=Object(n["g"])("i",{class:"bi bi-trash-fill"},null,-1),L=Object(n["i"])("清空購物車 "),M=[I,L],T=["disabled"],N=Object(n["g"])("i",{class:"bi bi-clipboard-check"},null,-1),B=Object(n["i"])(" 確認購物車"),U=[N,B];function V(t,e,c,m,O,I){var L=Object(n["E"])("router-link");return Object(n["y"])(),Object(n["f"])("div",a,[o,Object(n["g"])("div",r,[Object(n["g"])("div",s,[i,O.cartLength?(Object(n["y"])(!0),Object(n["f"])(n["a"],{key:0},Object(n["D"])(O.cartData.carts,(function(t){return Object(n["y"])(),Object(n["f"])("div",{key:t.id,class:"d-sm-flex justify-content-between my-4 pb-4 border-bottom"},[Object(n["g"])("div",l,[Object(n["g"])("div",{class:"mx-auto",style:Object(n["s"])([{backgroundImage:"url(".concat(t.product.imageUrl,")")},{height:"240px",width:"240px","background-size":"cover","background-position":"center center"}])},null,4),Object(n["g"])("div",u,[Object(n["g"])("h3",b,"產品: "+Object(n["H"])(t.product.title),1),Object(n["g"])("h4",d,"單價:NT$ "+Object(n["H"])(t.product.price),1),Object(n["g"])("p",null,"購買金額:NT$"+Object(n["H"])(t.total),1)])]),Object(n["g"])("div",f,[Object(n["g"])("div",p,[g,Object(n["R"])(Object(n["g"])("select",{class:"form-select text-center","onUpdate:modelValue":function(e){return t.qty=e},onChange:function(e){return I.updateCart(t)}},[(Object(n["y"])(),Object(n["f"])(n["a"],null,Object(n["D"])(10,(function(e){return Object(n["g"])("option",{value:e,key:"".concat(e).concat(t.id),selected:t.qty===e},Object(n["H"])(e),9,j)})),64))],40,h),[[n["L"],t.qty]])]),Object(n["g"])("button",{class:"btn btn-outline-danger btn-sm btn-block mb-2",type:"button",onClick:function(e){return I.deleteCartItem(t.id)}},v,8,x)])])})),128)):(Object(n["y"])(),Object(n["f"])("div",y,[w,Object(n["j"])(L,{class:"btn btn-light text-secondary",to:"/shopflowers"},{default:Object(n["Q"])((function(){return[k]})),_:1})]))]),Object(n["g"])("div",C,[$,Object(n["g"])("p",A,"商品金額: NT$"+Object(n["H"])(O.cartData.total),1),D,Object(n["g"])("p",H,"小計: NT$"+Object(n["H"])(O.cartData.total),1),q,Object(n["g"])("button",{class:"btn btn-outline-danger me-2 mb-lg-0 mb-md-2",type:"button",onClick:e[0]||(e[0]=function(){return I.deleteAll&&I.deleteAll.apply(I,arguments)})},M),Object(n["g"])("button",{class:"btn btn-secondary btn-block btn-cart",to:"/checkorder",disabled:0==O.cartLength,onClick:e[1]||(e[1]=function(t){return I.toCheckorder()})},U,8,T)])])])}var E=c("4dcd"),G={data:function(){return{cartData:{carts:[]},productId:"",cartLength:""}},methods:{getCarts:function(){var t=this;this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("ptsai0412","/cart")).then((function(e){t.cartData=e.data.data,t.cartLength=e.data.data.carts.length,E["a"].emit("get-cart")}))},updateCart:function(t){var e=this,c={product_id:t.id,qty:t.qty};this.$http.put("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("ptsai0412","/cart/").concat(t.id),{data:c}).then((function(t){e.$swal("已更新數量"),e.getCarts()}))},deleteAll:function(){var t=this;this.$http.delete("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("ptsai0412","/carts")).then((function(e){t.getCarts(),t.$swal("購物車已清空")}))},deleteCartItem:function(t){var e=this;this.$http.delete("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("ptsai0412","/cart/").concat(t)).then((function(t){e.getCarts(),e.$swal("已刪除商品")}))},toCheckorder:function(){this.$swal("完成購物車確認"),this.$router.push("/checkorder")}},mounted:function(){this.getCarts()}},J=(c("1a9f"),c("6b0d")),_=c.n(J);const z=_()(G,[["render",V]]);e["default"]=z},e8b5:function(t,e,c){var n=c("c6b6");t.exports=Array.isArray||function(t){return"Array"==n(t)}}}]);
//# sourceMappingURL=chunk-525f4d47.0f3ebf14.js.map